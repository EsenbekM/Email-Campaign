# Сервис управления email-рассылками

Этот проект представляет собой Django REST API для управления email-рассылками. Он позволяет создавать, обновлять, удалять и просматривать email-рассылки и клиентов, а также отправлять письма клиентам на основе правил кампании.

## Реализованы дополнительные задания

1. подготовить docker-compose для запуска всех сервисов проекта одной командой
2. реализовать дополнительный сервис, который раз в сутки отправляет статистику по обработанным рассылкам на email
3. реализовать дополнительную бизнес-логику: добавить в сущность "рассылка" поле "временной интервал", в котором можно задать промежуток времени, в котором клиентам можно отправлять сообщения с учётом их локального времени. Не отправлять клиенту сообщение, если его локальное время не входит в указанный интервал.
4. обеспечить подробное логирование на всех этапах обработки запросов, чтобы при эксплуатации была возможность найти в логах всю информацию по
• id рассылки - все логи по конкретной рассылке (и запросы на api и внешние запросы на отправку конкретных сообщений)
• id сообщения - по конкретному сообщению (все запросы и ответы от внешнего сервиса, вся обработка конкретного сообщения)
• id клиента - любые операции, которые связаны с конкретным клиентом (добавление/редактирование/отправка сообщения/...)

## Возможности

- Создание, обновление, удаление и просмотр email-рассылок.
- Создание, обновление, удаление и просмотр клиентов.
- Отправка писем клиентам на основе правил кампании.
- Сбор и просмотр статистики по отправленным письмам.
- Подробное логирование.
- Поддержка Celery для асинхронной обработки задач.
- Docker для легкого развертывания.

## Требования

- Python 3.8+
- Django 3.2+
- PostgreSQL
- Redis
- Celery

## Начало работы

### Предварительные требования

- Docker
- Docker Compose

### Переменные окружения

Создайте файл `.env` в корневом каталоге проекта и добавьте такие же переменные, как в **.envExample**

## Запуск проекта

### С использованием Docker

#### Соберите и запустите контейнеры Docker

```sh
docker-compose up --build
Примените миграции базы данных:
```

```sh
docker-compose exec back python manage.py migrate
Создайте суперпользователя:
```

```sh
docker-compose exec back python manage.py createsuperuser
Получите доступ к приложению:
```

Приложение будет доступно по адресу <http://localhost:8000>.

### Без использования Docker

#### Создайте и активируйте виртуальное окружение

```sh
python -m venv venv
source venv/bin/activate  # На Windows используйте `venv\Scripts\activate`
```

#### Установите зависимости

```sh
pip install -r requirements.txt
```

#### Настройте базу данных

Убедитесь, что PostgreSQL запущен, и создайте базу данных. Обновите настройки DATABASES в файле settings.py с вашими учетными данными базы данных.

#### Примените миграции базы данных

```sh
python manage.py migrate
```

#### Создайте суперпользователя

```sh
python manage.py createsuperuser
```

#### Запустите сервер разработки

```sh
python manage.py runserver
```

#### Запустите Celery worker

```sh
celery -A email_campaign worker --loglevel=info
```

Приложение будет доступно по адресу <http://localhost:8000>.
